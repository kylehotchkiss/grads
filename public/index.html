<!DOCTYPE html>
<html>
    <head>
        <script src="https://use.typekit.net/fps1ees.js"></script>
        <script>try{Typekit.load({ async: true });}catch(e){}</script>
        <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet" />
        <link href="https://api.mapbox.com/mapbox.js/v2.2.3/mapbox.css" rel="stylesheet" />
        <link href="style.css" rel="stylesheet" />
        <script>L_DISABLE_3D = true;</script>
        <script src="https://api.mapbox.com/mapbox.js/v2.2.3/mapbox.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
        <script src="script.js"></script>
    </head>
    <body>
        <div class="container">
            <div class="row">
                <div class="col-sm-10 col-sm-offset-1">
                    <article>
                        <section>
                            <h1>Grads: a javascript library<br />for accessing global weather conditions</h1>
                            <p>
                                <a href="https://github.com/kylehotchkiss/grads">Grads</a> will allow you to get estimated weather conditions for nearly any point on the globe. It's based on NOAA's excellent GFS/RAP weather models.
                                This is the same data that many weather predictions are made from, but other data is often mixed in as well.
                            </p><p>
                                NOAA provides all this data in gridded binary form for professionals to load into specialized software to run simulations, see weather trends and so forth.
                                But they also provide this data in ASCII so this library generates the URLs needed to access this data, makes the request, and decodes the data into a human-consumable format.
                                This data is not provided via APIs, and the timing of new data releases isn't set in stone, so there are still some issues when datasets should be available and aren't.
                            </p><p>
                                I originally started this code several years back, trying to build a trajectory predictor. Accessing it was the piece of the puzzle that made the trajectory predictor "work" but it was also the most complex and difficult to debug. I've spent time trying to figure out the (undocumented) proper way to pass variables and this is the solution I've come up with!
                            </p><p>
                                <em>This data and the associated library are not suitable for production app usage, nor are they suitable for making formal decisions on weather conditions. Do not rely on this data with your life, your safety, or your resources. There are paid solutions meeting these sort of accuracy needs. You have been warned!</em>
                            </p><p>
                                Check out the click-to-see weather metrics below, or check out <a href="forecast.html">a more traditional weather forecast map</a>.
                            </p>
                        </section>

                        <section>
                            <h2>Demo: Weather Conditions</h2>
                            <p>Click on any point in the map to get weather condition for that location. If nothing shows up, then try clicking another location (NOAA's datasource can be sticky sometimes). This demo uses GFS, but in the future will select a more precise model if one is available.</p>
                            <div id="demo-one" class="map"></div>

                            <div class="row">
                                <div class="col-sm-6">
                                    <h4>Location</h4>
                                    <ul>
                                        <li>Latitude: <span class="js-demo-one-lat"></span></li>
                                        <li>Longitude: <span class="js-demo-one-lon"></span></li>
                                    </ul>
                                </div>
                                <div class="col-sm-6">
                                    <h4>Conditions</h4>
                                    <ul>
                                        <li>Temperture: <span class="js-demo-one-temp js-demo-one-cond"></span></li>
                                        <li>Wind Speed: <span class="js-demo-one-windSpeed js-demo-one-cond"></span></li>
                                        <li>Wind Heading: <span class="js-demo-one-windHeading js-demo-one-cond"></span></li>
                                    </ul>
                                </div>
                            </div>
                        </section>

                        <section>
                            <h2>Demo: Ocean Waves</h2>
                            <p>Click any spot in the ocean to get a wave report. I've never driven a ship but asked a friend who has driven boats that have a downstairs about how to showcase this info and here's the format he recommends! This piece generates a lot of queries so please don't click too much.</p>

                            <div id="demo-two" class="map"></div>

                            <div class="row">
                                <div class="col-sm-3">
                                    <h4>Location</h4>
                                    <ul>
                                        <li>Latitude: <span class="js-demo-two-lat"></span></li>
                                        <li>Longitude: <span class="js-demo-two-lon"></span></li>
                                    </ul>
                                </div>
                                <div class="col-sm-3">
                                    <h4>Primary Swell</h4>
                                    <div class="js-demo-two-primary js-demo-two-cond"></div>
                                </div>
                                <div class="col-sm-3">
                                    <h4>Secondary Swell</h4>
                                    <div class="js-demo-two-secondary js-demo-two-cond"></div>
                                </div>
                                <div class="col-sm-3">
                                    <h4>Wind Swell</h4>
                                    <div class="js-demo-two-wind js-demo-two-cond"></div>
                                </div>
                            </div>
                        </section>

                        <section>
                            <h2>Q&amp;A</h2>

                            <p>Nobody has really used this yet, so not many real questions, but here some answers are anyways</p>

                            <p>
                                <strong>Why are the wind speed results so strange?</strong><br />
                                When you start talking about predictions and not actual data from sensors, you need to start with the math behind the predictions. Wind is the result of the gradient between two fronts. Predicting the components requires calculating the air pressure and temperture from two locations and then getting some differences. <a href="http://www.aprweather.com/pages/wind.htm">I learned how to do that here</a>. In addition, I'm not currently using surface level wind calcuations which may (not certain) account for geographical drag. I'm using wind variables which are more based on passed altitude, and I'm passing 0 to it. Still researching if a better variable exists.
                            </p>

                            <p>
                                <strong>Why does the weather data looks several hours off?</strong><br />
                                Two reasons: 1) the data is from a weather estimate and 2) global data is saved on a 3hr basis, and the closest version is choosen (which could be past or future). No gradient calculation is being used currently (getting both past and future values and calculating where a temperture should sit between them based on time) as that level of accuracy isn't needed.
                            </p>

                            <p>
                                <strong>Can I use this to predict/model _____?</strong><br />
                                The eventual goal is to gather data in a format more suitable for modelling and predicting, but I need to figure out how to pass ranges to GrADS and parse them out - making hundreds of requests to NOAAs servers for predictions purposes would be quite rude. Basically, it's possible to pass in a large range of locations and then cache them so the predictor could run faster. It's just not easy to get that data out yet.
                            </p>
                            <p>
                                <strong>Why does this plain not work for some locations?</strong><br />
                                I can't pretend to understand how complex weather models for the globe are but I assume a lot of how weather works (or doesn't work) in certain locations is hardcoded. There isn't any wave data around Antartica, for example, and that seems to me the most interesting place to see any.
                            </p>
                        </section>
                    </article>
                    <footer class="text-center">
                        <small>Copyright &copy; 2012 - 2016 Kyle Hotchkiss &bull; Freely available via the MIT licence</small>
                    </footer>
                </div>
            </div>
        </div>
    </body>
</html>
